<HTML>
    <HEAD>
        <script type="text/javascript" src = "https://d3js.org/d3.v4.min.js"></script>
        <script type="text/javascript" src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1">
    </HEAD>
    <BODY onload = "homePage()">
       <style>
           table, th, td{ 
    width: 90%;
               margin: 2%;
               border: 1px solid black;
}
           .button {
  background-color: #1831BE;
  border: 2px solid #4CAF50;
  color: white;
  padding: 3% 5%;
  text-align: left;
  text-decoration: none;
  font-size: 16px+5%;
  display: inline-block;
  margin: 5%;
  border-radius: 10px;
  transition-duration: 0.4s;
} 
           .button:hover {
               
                background-color: #4CAF50; /* Green */
                color: white;
                box-shadow: 0 12px 16px 0 rgba(0,0,0,0.24), 0 17px 50px 0 rgba(0,0,0,0.19);
           }
           .searchBar {
               width: 50%;
               height: 30px;
               background-color: aliceblue;
               border-radius: 5px;
               min-width: 300px;
               max-width: 800px;
               margin: auto;
           }       
        </style>
        <div id = "overview"></div>
        <div id = "homeButton"></div>
        <div id = "searchBar"></div>
        <div id = "land"></div>
        <script type = "text/javascript"> 
            
            
            /*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@     Set all the variables before they are used.
            @@@@@@@@@@@                                 @@@@@@@@@@@@@@
            @@@@@@@@@@@            Variables!           @@@@@@@@@@@@@@
            @@@@@@@@@@@                                 @@@@@@@@@@@@@@
            @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*/
            
            var pageloc = 1;
            var yearSelect = null;
            var wordInput = null;
            var houseSelect = null;
            var MPselect = null;
            var tmpDataset = [],i,j;
            
            /*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
            @@@@@@@@@@@                                 @@@@@@@@@@@@@@      Introduction!
            @@@@@@@@@@@         First Paragraph!        @@@@@@@@@@@@@@
            @@@@@@@@@@@                                 @@@@@@@@@@@@@@
            @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*/
            d3.select('#overview').append('h4').style('margin','5%').text('Tech4Change team from Phandeeyar develops the dashboard about Election Data to use and access it easily and effectively. The dashboard allows you to search information of all the elections. Most of the election data are extracted from Union Election Commission (UEC). The data of General Elections (2010, 2015) and By-Elections (2012, 2017, 2018) can be downloaded. Datasets are digitized, cleaned and manipulated by Tech4Change Team.');
            
            
            /*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
            @@@@@@@@@@@                                 @@@@@@@@@@@@@@      Call homePage
            @@@@@@@@@@@         Home button!            @@@@@@@@@@@@@@
            @@@@@@@@@@@                                 @@@@@@@@@@@@@@
            @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*/
            
            d3.select('#homeButton').append('button').style('width','107px').style('background-position','top').style('padding','0px 30px 0px 30px').style('position','fixed').style('right','2%').style('top','90%').style('float','right').attr('id','footerhome').text('Home').on('click',function () {return homePage();});
            
            
            
           
            
            /*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
            @@@@@@@@@@@                                 @@@@@@@@@@@@@@      Call mpPage function and assign the input to wordInput variable
            @@@@@@@@@@@         The Search Bar!         @@@@@@@@@@@@@@
            @@@@@@@@@@@                                 @@@@@@@@@@@@@@
            @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*/
            var searchingBar = d3.select('#searchBar').append('center');
            searchingBar.append('input').classed('searchBar',true).attr('id','searching').attr('type','search').attr('placeholder','Search by : MP names, Constituency names, Township names ...');
            searchingBar.append('button').text('Submit').style('height','30px').attr('type','submit').attr('form','searching').attr('value','Submit').on('click', function () {return searchInput()});
            document.getElementById("searching").onsearch = function () {searchInput()};
            function searchInput() {
                wordInput = document.getElementById('searching').value;
                return mpPage();
            }
            ////.append('input').attr('id','searching').attr('type','search').attr('placeholder','Search by : MP names, Constituency names, Township names ...').on('click',document.getElementById("searching") = function () {searchInput()})
            
            /*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
            @@@@@@@@@@@                                 @@@@@@@@@@@@@@       
            @@@@@@@@@@@             Pages!              @@@@@@@@@@@@@@
            @@@@@@@@@@@                                 @@@@@@@@@@@@@@
            @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*/
            
            /*-----------------------home---------------------------*/    ///       Landing page,
            function homePage () {
                d3.select('#land').text('');
                var land = d3.select('#land').style('margin-left','50px');
                land.append('h3').text('General election : ').selectAll('button').data(['2010','2015']).enter().append('button').classed('button',true).text(function (d) {return d;}).on('click',function (d) {pageloc = 2; yearSelect = d; return yearPage();});
                land.append('h3').text('By-election : ').selectAll('button').data(['2012','2017','2018']).enter().append('button').classed('button', true).text(function (d) {return d;}).on('click',function (d) {yearSelect = d; return constPage();}); 
                
                
                
                
                d3.select('#land').append('center').append('p').text('MP position in 2015');
                
                
                var width = 450
    height = 450
    margin = 40

// The radius of the pieplot is half the width or half the height (smallest one). I substract a bit of margin.
var radius = Math.min(width, height) / 2 - margin

// append the svg object to the div called 'my_dataviz'
var svg = d3.select("#land").append('center')
  .append("svg")
    .attr("width", width)
    .attr("height", height)
  .append("g")
    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

// Create dummy data
var data = {NLD: 65, USDP: 9, Others:1, Military:25}

// set the color scale
var color = d3.scaleOrdinal()
  .domain(["NLD", "USDP","Ethnic","Military"])
  .range(d3.schemeDark2);

// Compute the position of each group on the pie:
var pie = d3.pie()
  .sort(null) // Do not sort group by size
  .value(function(d) {return d.value; })
var data_ready = pie(d3.entries(data))

// The arc generator
var arc = d3.arc()
  .innerRadius(radius * 0.5)         // This is the size of the donut hole
  .outerRadius(radius * 0.8)

// Another arc that won't be drawn. Just for labels positionning
var outerArc = d3.arc()
  .innerRadius(radius * 0.9)
  .outerRadius(radius * 0.9)

// Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.
svg
  .selectAll('allSlices')
  .data(data_ready)
  .enter()
  .append('path')
  .attr('d', arc)
  .attr('fill', function(d){ return(color(d.data.key)) })
  .attr("stroke", "white")
  .style("stroke-width", "2px")
  .style("opacity", 0.7)

// Add the polylines between chart and labels:
svg
  .selectAll('allPolylines')
  .data(data_ready)
  .enter()
  .append('polyline')
    .attr("stroke", "black")
    .style("fill", "none")
    .attr("stroke-width", 1)
    .attr('points', function(d) {
      var posA = arc.centroid(d) // line insertion in the slice
      var posB = outerArc.centroid(d) // line break: we use the other arc generator that has been built only for that
      var posC = outerArc.centroid(d); // Label position = almost the same as posB
      var midangle = d.startAngle + (d.endAngle - d.startAngle) / 2 // we need the angle to see if the X position will be at the extreme right or extreme left
      posC[0] = radius * 0.95 * (midangle < Math.PI ? 1 : -1); // multiply by 1 or -1 to put it on the right or on the left
      return [posA, posB, posC]
    })

// Add the polylines between chart and labels:
svg
  .selectAll('allLabels')
  .data(data_ready)
  .enter()
  .append('text')
    .text( function(d) { console.log(d.data.key) ; return d.data.key } )
    .attr('transform', function(d) {
        var pos = outerArc.centroid(d);
        var midangle = d.startAngle + (d.endAngle - d.startAngle) / 2
        pos[0] = radius * 0.99 * (midangle < Math.PI ? 1 : -1);
        return 'translate(' + pos + ')';
    })
    .style('text-anchor', function(d) {
        var midangle = d.startAngle + (d.endAngle - d.startAngle) / 2
        return (midangle < Math.PI ? 'start' : 'end')
    })
                
                
                d3.select('#land').append('center').append('p').text('Elections in Myanmar are held for the Pyidtaungsu Hluttaw (the Assembly of the Union, Myanmarâ€™s national legislature) and for regional and state Hluttaw (assemblies)1 The national legislature is made up of two bodies, the Amyotha Hluttaw (the 224-seat House of Nationalities) and the Pyithu Hluttaw (the 440-seat House of Representatives). Three quarters of the national seats in each House are selected through elections, most recently held in 2015. One quarter of the seats in each House are made up of army representatives selected by the Commander-in-Chief.');
                
                
                
            }
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            /*-----------------------Year---------------------------*/
            function yearPage () {
                d3.select('#land').text("");
                d3.select('#land').append("center").append("h2").text("Year : " + yearSelect);
                
                var yrtable = d3.select('#land').append('table').style('border','none');
                yrtable.append('tr').selectAll('td').data(['Held on','8 November 2015']).enter().append('td').text(function(d){return d});
                yrtable.append('tr').selectAll('td').data(['Available seats','1557']).enter().append('td').text(function(d){return d});
                yrtable.append('tr').selectAll('td').data(['President','Htin Kyaw']).enter().append('td').text(function(d){return d});
                yrtable.append('tr').selectAll('td').data(['State Counselor','Aung San Suu Kyi']).enter().append('td').text(function(d){return d});
                
                
                d3.select('#land').append('h2').text('House by :').selectAll('button').data(['Amyotha Hluttaw','Pyithu Hluttaw','State and Region Hluttaw']).enter().append('button').classed('button',true).text(function (d) {return d;}).on('click', function(d) {houseSelect = d;});
            }
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            /*----------------------House---------------------------*/
            function housePage () {
                d3.select('#land').text("");
                d3.select('#land').append("center").append("h2").text("Year : " + yearSelect);
                d3.select('#land').append("center").append("h2").text("House : " + houseSelect);
            }
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            /*-------------------Constituency-----------------------*/
            function constPage () {
                //constInfo = d3.select();
                d3.select('#land').text('');
                d3.select('#land').append('center').append('h2').text('Year : ' + yearSelect);
                d3.select('#land').append('center').append('h2').text('House : ' + houseSelect)
                
               
                var mpTable = d3.select('#land').append('table').style('border','1px solid black');
               
                
                */
            }
            
            /*-----------------------MP-----------------------------*/
            function mpPage () {
                d3.select('#land').text(""); 
                
            }
            
            
        </script>
    </BODY>
</HTML>